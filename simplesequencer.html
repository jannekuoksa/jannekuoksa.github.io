<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <style>
        button{background-color:"#FFFFFF";}
    </style>
</head>

<body>
    <p>Kick</p>
    <button id="button" class="kick" onclick="toggleactive(this)">1</button>
    <button id="button" class="kick" onclick="toggleactive(this)">2</button>
    <button id="button" class="kick" onclick="toggleactive(this)">3</button>
    <button id="button" class="kick" onclick="toggleactive(this)">4</button>
    <button id="button" class="kick" onclick="toggleactive(this)">5</button>
    <button id="button" class="kick" onclick="toggleactive(this)">6</button>
    <button id="button" class="kick" onclick="toggleactive(this)">7</button>
    <button id="button" class="kick" onclick="toggleactive(this)">8</button>
    <input id="kick-vol" type="range" min="0" max="100" value="50">vol</input>
    <p>Snare</p>
    <button id="button" class="snare" onclick="toggleactive(this)">1</button>
    <button id="button" class="snare" onclick="toggleactive(this)">2</button>
    <button id="button" class="snare" onclick="toggleactive(this)">3</button>
    <button id="button" class="snare" onclick="toggleactive(this)">4</button>
    <button id="button" class="snare" onclick="toggleactive(this)">5</button>
    <button id="button" class="snare" onclick="toggleactive(this)">6</button>
    <button id="button" class="snare" onclick="toggleactive(this)">7</button>
    <button id="button" class="snare" onclick="toggleactive(this)">8</button>
    <input id="snare-vol" type="range" min="0" max="100" value="50">vol</input>
    <p>hihat</p>
    <button id="button" class="hihat" onclick="toggleactive(this)">1</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">2</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">3</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">4</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">5</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">6</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">7</button>
    <button id="button" class="hihat" onclick="toggleactive(this)">8</button>
    <input id="hihat-vol" type="range" min="0" max="100" value="50">vol</input>
    <p>bassline</p>
    <button id="button" class="basslineA" onclick="toggleactive(this)">1</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">2</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">3</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">4</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">5</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">6</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">7</button>
    <button id="button" class="basslineA" onclick="toggleactive(this)">8</button>
    <br>
    <button id="button" class="basslineB" onclick="toggleactive(this)">1</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">2</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">3</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">4</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">5</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">6</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">7</button>
    <button id="button" class="basslineB" onclick="toggleactive(this)">8</button>
    <input id="bassline-vol" type="range" min="0" max="100" value="50">vol</input>
    <textarea id="tempo"></textarea>
    <br>
    <button onclick="togglemusic(this)">Play</button>

    <script>
        var kick = document.getElementsByClassName("kick");
        var kickaudio = new Audio('audio/kick.wav');

        var snare = document.getElementsByClassName("snare");
        var snareaudio = new Audio('audio/snare.wav');

        var hihat = document.getElementsByClassName("hihat");
        var hihataudio = new Audio('audio/hihat.wav');

        var basslineA = document.getElementsByClassName("basslineA");
        var bassaudioa = new Audio('audio/bassa.wav');

        var basslineB = document.getElementsByClassName("basslineB");
        var bassaudiob = new Audio('audio/bassb.wav');


        


       
        var interval;
        var i = 0;

        function toggleactive(obj) {
            if (obj.classList.contains("on")) {
                obj.classList.remove("on");
                obj.style.backgroundColor = "#FFFFFF";
            }
            else {
                obj.classList.add("on");
                obj.style.backgroundColor = "#707070";

            }
        }
        function togglemusic(obj) {
            if (obj.classList.contains("on")) {
                obj.classList.remove("on");
                obj.style.backgroundColor = "#FFFFFF";
                clearInterval(interval);
            }
            else {
                obj.classList.add("on");
                obj.style.backgroundColor = "#707070";
                var speed = document.getElementById("tempo").value
                interval = setInterval(play, 300);
            }


        }
        function play() {
            if (i > kick.length - 1) i = 0;
            if (i > 0) {
                kick[i - 1].style.color = "black";
                kick[i].style.color = "red";

                snare[i - 1].style.color = "black";
                snare[i].style.color = "red";

                hihat[i - 1].style.color = "black";
                hihat[i].style.color = "red";

                basslineA[i - 1].style.color = "black";
                basslineA[i].style.color = "red";

                basslineB[i - 1].style.color = "black";
                basslineB[i].style.color = "red";
            }
            else {
                kick[kick.length - 1].style.color = "black";
                kick[i].style.color = "red";

                snare[snare.length - 1].style.color = "black";
                snare[i].style.color = "red";

                hihat[hihat.length - 1].style.color = "black";
                hihat[i].style.color = "red";


                basslineA[basslineA.length - 1].style.color = "black";
                basslineA[i].style.color = "red";

                
                basslineB[basslineB.length - 1].style.color = "black";
                basslineB[i].style.color = "red";
            }
            if (kick[i].classList.contains("on")) {
                var audiocopy = kickaudio.cloneNode(true);
                audiocopy.volume = document.getElementById("kick-vol").value / 100;
                audiocopy.play();
                
            }
            if (snare[i].classList.contains("on")) {
                var audiocopy = snareaudio.cloneNode(true);
                audiocopy.volume = document.getElementById("snare-vol").value / 100;
                audiocopy.play();
            }
            if (hihat[i].classList.contains("on")) {
                var audiocopy = hihataudio.cloneNode(true);
                audiocopy.volume = document.getElementById("hihat-vol").value / 100;
                audiocopy.play();
            }
            if (basslineA[i].classList.contains("on")) {
                var audiocopy = bassaudioa.cloneNode(true);
                audiocopy.volume = document.getElementById("bassline-vol").value / 100;
                audiocopy.play();
            }
            if (basslineB[i].classList.contains("on")) {
                var audiocopy = bassaudiob.cloneNode(true);
                audiocopy.volume = document.getElementById("bassline-vol").value / 100;
                audiocopy.play();
            }
            

window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return; 
  }

  switch (event.key) {
    case "z":
    if (kick[i].classList.contains("on")) {
                kick[i].classList.remove("on");
                kick[i].style.backgroundColor = "#FFFFFF";
            }
            else {
                kick[i].classList.add("on");
                kick[i].style.backgroundColor = "#707070";

            }

      break;
    case "x":
    if (snare[i].classList.contains("on")) {
                snare[i].classList.remove("on");
                snare[i].style.backgroundColor = "#FFFFFF";
            }
            else {
                snare[i].classList.add("on");
                snare[i].style.backgroundColor = "#707070";

            }

      break;
    case "c":
    if (hihat[i].classList.contains("on")) {
                hihat[i].classList.remove("on");
                hihat[i].style.backgroundColor = "#FFFFFF";
            }
            else {
                hihat[i].classList.add("on");
                hihat[i].style.backgroundColor = "#707070";

            }

      break;

    default:
      return; 
  }

  // Cancel the default action to avoid it being handled twice
  event.preventDefault();
}, true);

        
        i++;
        }


    </script>
</body>